# Latent Control System Configuration - macOS Optimized
#
# This configuration is optimized for macOS systems.
#
# macOS-specific considerations:
# - MPS (Metal Performance Shaders) support for Apple Silicon (M1/M2/M3)
# - 4-bit quantization not supported on MPS
# - CPU fallback for Intel Macs or when MPS unavailable
#
# Platform: macOS (Intel or Apple Silicon)
# Hardware profiles:
# - Apple Silicon: M1/M2/M3 with unified memory (8-64GB)
# - Intel Mac: CPU-only or AMD GPU (limited support)

model:
  model_path: "path/to/your/model"  # Replace with your local model path or HuggingFace model ID
  load_in_4bit: false               # Not supported on MPS
  device: "mps"                     # Use MPS on Apple Silicon, falls back to CPU
  layer_fraction: 0.6               # Layer for vector extraction (0.0-1.0)
  cache_dir: "vectors"              # Where trained vectors are stored
  alpha_max_norm: 2.0               # Maximum alpha normalization
  max_new_tokens: 200               # Reduced for MPS performance
  temperature: 0.7                  # Sampling temperature
  top_p: 0.9                        # Nucleus sampling parameter
  random_seed: 42                   # Reproducibility seed
  num_pairs: 96                     # Reduced for unified memory constraints

auto_train: true

datasets:
  safety:
    concept_a_path: "prompts/harmful.txt"
    concept_b_path: "prompts/harmless.txt"
    description: "Safety control (harmful vs harmless steering)"
    default_alpha: 2.0

  format:
    concept_a_path: "prompts/demo_style_narrative.txt"
    concept_b_path: "prompts/demo_style_bulleted.txt"
    description: "Output format control"
    default_alpha: 0.0

  emoji:
    concept_a_path: "prompts/demo_style_emoji.txt"
    concept_b_path: "prompts/demo_style_no_emoji.txt"
    description: "Emoji control"
    default_alpha: 0.0
